{{ 'section-info-page.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

{%- assign show_navigation = section.settings.show_navigation and section.settings.menu != blank -%}
{%- assign header_alignment = section.settings.header_alignment -%}

<div class="color-{{ section.settings.color_scheme }} gradient">
  <div class="info-page page-width section-{{ section.id }}-padding">
    <header class="info-page__header{% if header_alignment == 'center' %} info-page__header--center{% endif %}">
      {%- if section.settings.badge != blank -%}
        <p class="info-page__badge">{{ section.settings.badge | escape }}</p>
      {%- endif -%}
      {%- if section.settings.show_page_title and page.title != blank -%}
        <h1 class="info-page__title {{ section.settings.heading_size }}">{{ page.title | escape }}</h1>
      {%- elsif section.settings.heading != blank -%}
        <h1 class="info-page__title {{ section.settings.heading_size }}">{{ section.settings.heading | escape }}</h1>
      {%- endif -%}
      {%- if section.settings.intro != blank -%}
        <div class="info-page__intro rte">{{ section.settings.intro }}</div>
      {%- endif -%}
    </header>

    {%- if section.blocks.size > 0 -%}
      <div class="info-page__callouts">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when 'highlight' -%}
              {%- assign tone = block.settings.tone | default: 'info' -%}
              <div class="info-page__highlight info-page__highlight--{{ tone }}" {{ block.shopify_attributes }}>
                {%- if block.settings.heading != blank -%}
                  <h3 class="h4">{{ block.settings.heading | escape }}</h3>
                {%- endif -%}
                {%- if block.settings.content != blank -%}
                  <div class="rte">{{ block.settings.content }}</div>
                {%- endif -%}
              </div>
            {%- when 'button' -%}
              <div class="info-page__actions" {{ block.shopify_attributes }}>
                {%- if block.settings.button_label != blank and block.settings.button_link != blank -%}
                  <a href="{{ block.settings.button_link }}" class="button{% if block.settings.button_style_secondary %} button--secondary{% endif %}">
                    {{ block.settings.button_label | escape }}
                  </a>
                {%- endif -%}
                {%- if block.settings.button_label_2 != blank and block.settings.button_link_2 != blank -%}
                  <a href="{{ block.settings.button_link_2 }}" class="button{% if block.settings.button_style_secondary_2 %} button--secondary{% endif %}">
                    {{ block.settings.button_label_2 | escape }}
                  </a>
                {%- endif -%}
              </div>
          {%- endcase -%}
        {%- endfor -%}
      </div>
    {%- endif -%}

    <div class="info-page__body{% if show_navigation %} info-page__body--with-nav{% endif %}">
      {%- if show_navigation -%}
        <aside class="info-page__nav" aria-label="{{ section.settings.navigation_heading | default: section.settings.badge | default: page.title | default: 'Navegação' | escape }}">
          {%- if section.settings.navigation_heading != blank -%}
            <p class="info-page__nav-title">{{ section.settings.navigation_heading | escape }}</p>
          {%- endif -%}
          <nav>
            <ul class="info-page__nav-list">
              {%- for link in section.settings.menu.links -%}
                <li>
                  <a class="info-page__nav-link" href="{{ link.url }}"{% if link.current %} aria-current="page"{% endif %}>{{ link.title | escape }}</a>
                </li>
              {%- endfor -%}
            </ul>
          </nav>
        </aside>
      {%- endif -%}

      <div class="info-page__content rte">
        {%- if page.content != blank -%}
          {{ page.content }}
        {%- else -%}
          <div class="page-placeholder-wrapper placeholder">
            {{ 'page' | placeholder_svg_tag: 'page-placeholder' }}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Informational page",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "show_page_title",
      "default": true,
      "label": "Show page title"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Custom heading",
      "info": "Displayed when the page title is hidden."
    },
    {
      "type": "text",
      "id": "badge",
      "label": "Label badge",
      "info": "Optional label displayed above the title."
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "options": [
        { "value": "h2", "label": "Small" },
        { "value": "h1", "label": "Medium" },
        { "value": "h0", "label": "Large" }
      ],
      "default": "h0"
    },
    {
      "type": "select",
      "id": "header_alignment",
      "label": "Header alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ],
      "default": "left"
    },
    {
      "type": "richtext",
      "id": "intro",
      "label": "Introductory text"
    },
    {
      "type": "checkbox",
      "id": "show_navigation",
      "label": "Show navigation menu",
      "default": false
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Navigation menu"
    },
    {
      "type": "text",
      "id": "navigation_heading",
      "label": "Navigation heading"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Section color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Section spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "highlight",
      "name": "Callout",
      "settings": [
        {
          "type": "select",
          "id": "tone",
          "label": "Style",
          "default": "info",
          "options": [
            { "value": "info", "label": "Informational" },
            { "value": "success", "label": "Success" },
            { "value": "warning", "label": "Warning" },
            { "value": "critical", "label": "Critical" }
          ]
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        }
      ]
    },
    {
      "type": "button",
      "name": "Buttons",
      "settings": [
        {
          "type": "text",
          "id": "button_label",
          "label": "Primary button label"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Primary button link"
        },
        {
          "type": "checkbox",
          "id": "button_style_secondary",
          "label": "Use secondary style",
          "default": false
        },
        {
          "type": "text",
          "id": "button_label_2",
          "label": "Secondary button label"
        },
        {
          "type": "url",
          "id": "button_link_2",
          "label": "Secondary button link"
        },
        {
          "type": "checkbox",
          "id": "button_style_secondary_2",
          "label": "Use secondary style for secondary button",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Informational page",
      "category": "Text"
    }
  ]
}
{% endschema %}
